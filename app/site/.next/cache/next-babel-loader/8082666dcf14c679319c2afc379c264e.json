{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Widget from '../components/widget';\nimport fetchData from \"../api/api\";\nimport CONFIG from \"../api/base_url\";\nimport SectionTitle from '../components/section-title';\nimport { useRouter } from 'next/router';\nimport { withRouter } from 'next/router';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport { FiEye, FiEdit, FiTrash, FiX, FiSearch, FiToggleLeft, FiToggleRight } from 'react-icons/fi';\nimport axios from \"axios\";\nimport stringify from 'json-stringify-safe';\n\nvar JObPreview = function JObPreview() {\n  var router = useRouter();\n\n  var _useState = useState(''),\n      job = _useState[0],\n      setjob = _useState[1],\n      _useState2 = useState({}),\n      view_obj = _useState2[0],\n      setview_obj = _useState2[1],\n      _useState3 = useState(false),\n      view_show = _useState3[0],\n      setview_show = _useState3[1];\n\n  var _useState4 = useState(''),\n      applyname = _useState4[0],\n      setapplyname = _useState4[1],\n      _useState5 = useState(false),\n      applyname_err = _useState5[0],\n      setapplyname_err = _useState5[1],\n      _useState6 = useState(''),\n      applyemail = _useState6[0],\n      setapplyemail = _useState6[1],\n      _useState7 = useState(false),\n      applyemail_err = _useState7[0],\n      setapplyemail_err = _useState7[1],\n      _useState8 = useState(''),\n      applyphone = _useState8[0],\n      setapplyphone = _useState8[1],\n      _useState9 = useState(false),\n      applyphone_err = _useState9[0],\n      setapplyphone_err = _useState9[1],\n      _useState10 = useState(''),\n      applyqualification = _useState10[0],\n      setapplyqualification = _useState10[1],\n      _useState11 = useState(false),\n      applyqualification_err = _useState11[0],\n      setapplyqualification_err = _useState11[1],\n      _useState12 = useState(''),\n      applycategoryname = _useState12[0],\n      setapplycategoryname = _useState12[1],\n      _useState13 = useState(false),\n      applycategoryname_err = _useState13[0],\n      setapplycategoryname_err = _useState13[1],\n      _useState14 = useState(''),\n      applycategoryid = _useState14[0],\n      setapplycategoryid = _useState14[1],\n      _useState15 = useState(false),\n      applycategoryid_err = _useState15[0],\n      setapplycategoryid_err = _useState15[1],\n      _useState16 = useState(''),\n      applycovernotes = _useState16[0],\n      setapplycovernotes = _useState16[1],\n      _useState17 = useState(false),\n      applycovernotes_err = _useState17[0],\n      setapplycovernotes_err = _useState17[1],\n      _useState18 = useState(''),\n      applyjobid = _useState18[0],\n      setapplyjobid = _useState18[1],\n      _useState19 = useState(''),\n      show_skills_data = _useState19[0],\n      setshow_skills = _useState19[1],\n      _useState20 = useState(false),\n      clicked = _useState20[0],\n      setclicked = _useState20[1],\n      _useState21 = useState(''),\n      selectedFile = _useState21[0],\n      setselectedFile = _useState21[1],\n      _useState22 = useState(false),\n      selectedFile_name = _useState22[0],\n      setselectedFile_name = _useState22[1],\n      _useState23 = useState(''),\n      applyfile = _useState23[0],\n      setapplyfile = _useState23[1],\n      _useState24 = useState(false),\n      applyfile_err = _useState24[0],\n      setapplyfile_err = _useState24[1];\n\n  var _useSelector = useSelector(function (state) {\n    return {\n      palettes: state.palettes\n    };\n  }, shallowEqual),\n      palettes = _useSelector.palettes;\n\n  var _palettes = _objectSpread({}, palettes),\n      background = _palettes.background;\n\n  var applyonChange = function applyonChange(e, name) {\n    if (String(name) === String('applyname')) {\n      if (!e.target.value) {\n        setapplyname_err(true);\n      } else {\n        setapplyname_err(false);\n      }\n\n      setapplyname(e.target.value);\n    }\n\n    if (String(name) === String('applyemail')) {\n      if (!e.target.value) {\n        setapplyemail_err(true);\n      } else {\n        setapplyemail_err(false);\n      }\n\n      setapplyemail(e.target.value);\n    }\n\n    if (String(name) === String('applyphone')) {\n      if (!e.target.value) {\n        setapplyphone_err(true);\n      } else {\n        setapplyphone_err(false);\n      }\n\n      setapplyphone(e.target.value);\n    }\n\n    if (String(name) === String('applyqualification')) {\n      if (!e.target.value) {\n        setapplyqualification_err(true);\n      } else {\n        setapplyqualification_err(false);\n      }\n\n      setapplyqualification(e.target.value);\n    }\n\n    if (String(name) === String('applycovernotes')) {\n      if (!e.target.value) {\n        setapplycovernotes_err(true);\n      } else {\n        setapplycovernotes_err(false);\n      }\n\n      setapplycovernotes(e.target.value);\n    }\n  }; //   const router = useRouter();\n\n\n  var jobs_id = router.query.job_id;\n\n  var apply_submit = function apply_submit(e) {\n    e.preventDefault();\n\n    if (!applycategoryname) {\n      setapplycategoryname_err(true);\n      return toast.error('Category is required');\n    }\n\n    if (applycategoryname_err) {\n      return toast.error('Category is required');\n    }\n\n    if (!applyname) {\n      setapplyname_err(true);\n      return toast.error('Name is required');\n    }\n\n    if (applyname_err) {\n      return toast.error('Name is required');\n    }\n\n    if (!applyemail) {\n      setapplyemail_err(true);\n      return toast.error('Email is required');\n    }\n\n    if (applyemail_err) {\n      return toast.error('Email is required');\n    }\n\n    if (!applyqualification) {\n      setapplyqualification_err(true);\n      return toast.error('Qualification is required');\n    }\n\n    if (applyqualification_err) {\n      return toast.error('Qualification is required');\n    }\n\n    if (!applyphone) {\n      setapplyphone_err(true);\n      return toast.error('Phone is required');\n    }\n\n    if (applyphone_err) {\n      return toast.error('Phone is required');\n    }\n\n    if (!applycovernotes) {\n      setapplycovernotes_err(true);\n      return toast.error('Cover notes is required');\n    }\n\n    if (applycovernotes_err) {\n      return toast.error('Cover notes is required');\n    }\n\n    var data = {\n      applyname: applyname,\n      applyemail: applyemail,\n      applyphone: applyphone,\n      applyqualification: applyqualification,\n      applycategoryname: applycategoryname,\n      applycategoryid: applycategoryid,\n      applycovernotes: applycovernotes,\n      applyjobid: applyjobid,\n      applyfile: applyfile\n    };\n    var apply = {};\n    apply.jobs_id = data.applyjobid;\n    apply.category_id = data.applycategoryid;\n    apply.category_name = data.applycategoryname;\n    apply.name = data.applyname;\n    apply.email = data.applyemail;\n    apply.phone = data.applyphone;\n    apply.qualification = data.applyqualification;\n    apply.message = data.applycovernotes;\n    var formData = new FormData();\n    formData.append('data', JSON.stringify(apply));\n    formData.append('file', applyfile);\n    var response = fetchData('/site/apply/jobs', 'post', formData);\n    response.then(function (res) {\n      if (res && res.data && +res.data.status === 0) {\n        if (res.data.errors && res.data.errors.length > 0 && Array.isArray(res.data.errors)) {\n          res.data.errors.map(function (item) {\n            return toast.error(item.msg);\n          });\n        } else {\n          toast.error(res.data.response);\n        }\n      } else {\n        if (res && res.data && +res.data.status === 1) {\n          toast.success(res.data.response);\n        }\n\n        setTimeout(function () {\n          setapplyname('');\n          setapplyname_err(false);\n          setapplyemail('');\n          setapplyemail_err(false);\n          setapplyphone('');\n          setapplyphone_err(false);\n          setapplyqualification('');\n          setapplyqualification_err(false);\n          setapplycategoryname('');\n          setapplycategoryname_err(false);\n          setapplycategoryid('');\n          setapplycategoryid_err(false);\n          setapplycovernotes('');\n          setapplycovernotes_err(false);\n          setapplyjobid('');\n          setapplyfile('');\n        }, 1000);\n      }\n    })[\"catch\"](function (err) {\n      console.log(\"err\", err); // return router.push('/admin-login');\n    });\n  };\n\n  var onFileChange = function onFileChange(fileChangeEvent) {\n    setapplyfile(fileChangeEvent.target.files[0]);\n  };\n\n  var handleUpload = function handleUpload(e, file) {\n    e.preventDefault();\n    console.log(\"file--------------\", file); // console.log(\"this.state.selectedFile.name---------------\", this.state.selectedFile.name)\n    // setselectedFile(this.state.selectedFile);\n    // setselectedFile_name(this.state.selectedFile.name);\n    // [selectedFile, setselectedFile] = useState(''),\n    // [selectedFile_name, setselectedFile_name] = useState(false)\n    // const data = new FormData();\n    // data.append('file', this.state.selectedFile, this.state.selectedFile.name);\n    // axios.post(endpoint, data).then((res) => {\n    //   console.log(res.statusText);\n    // });\n  };\n\n  useEffect(function () {\n    var data = {};\n    data.job_id = jobs_id;\n    var response = fetchData('/site/jobs/getjobdetails', 'post', data);\n    response.then(function (res) {\n      if (res && res.data && +res.data.status === 0) {\n        if (res.data.errors && res.data.errors.length > 0 && Array.isArray(res.data.errors)) {\n          res.data.errors.map(function (item) {\n            return toast.error(item.msg);\n          });\n        } else {\n          settable_arr([]);\n        }\n      } else {\n        if (res && res.data && +res.data.status === 1) {\n          // setview_obj(res.data.response);\n          setapplycategoryname(res.data.response.name);\n          setapplycategoryid(res.data.response.category_id);\n          setapplyjobid(res.data.response._id);\n        }\n      }\n    })[\"catch\"](function (err) {\n      console.log(\"err\", err);\n    });\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(ToastContainer, {\n    position: \"top-right\",\n    autoClose: 2500,\n    closeOnClick: true\n  }), __jsx(SectionTitle, {\n    title: \"\",\n    subtitle: \"Apply Job\"\n  }), __jsx(Widget, {\n    title: \"\"\n  }, __jsx(\"div\", null, __jsx(\"form\", null, __jsx(\"div\", {\n    className: \"flex flex-col lg:flex-row lg:flex-wrap lg:w-1/2\"\n  }, __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Category\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-input form-input-\".concat(applycategoryname_err ? 'invalid' : 'valid'),\n    placeholder: \"Name\",\n    value: applycategoryname,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applycategoryname');\n    },\n    disabled: true\n  }), applycategoryname_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \" Category is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Name\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-input form-input-\".concat(applyname_err ? 'invalid' : 'valid'),\n    placeholder: \"Name\",\n    value: applyname,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applyname');\n    }\n  }), applyname_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \" Name is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Email\"), __jsx(\"input\", {\n    type: \"email\",\n    className: \"form-input form-input-\".concat(applyemail_err ? 'invalid' : 'valid'),\n    placeholder: \"Email\",\n    value: applyemail,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applyemail');\n    }\n  }), applyemail_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \" Email is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Qualification\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-input form-input-\".concat(applyqualification_err ? 'invalid' : 'valid'),\n    placeholder: \"Qualification\",\n    value: applyqualification,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applyqualification');\n    }\n  }), applyqualification_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \" Qualification is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Phone\"), __jsx(\"input\", {\n    type: \"number\",\n    className: \"form-input form-input-\".concat(applyphone_err ? 'invalid' : 'valid'),\n    placeholder: \"Phone Number\",\n    value: applyphone,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applyphone');\n    }\n  }), applyphone_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \"Phone is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Cover Notes\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-input form-input-\".concat(applycovernotes_err ? 'invalid' : 'valid'),\n    placeholder: \"Cover notes\",\n    value: applycovernotes,\n    onChange: function onChange(e) {\n      return applyonChange(e, 'applycovernotes');\n    }\n  }), applycovernotes_err ? __jsx(\"div\", {\n    className: \"form-error\"\n  }, \"Cover notes is required\") : null)), __jsx(\"div\", {\n    className: \"w-full \"\n  }, __jsx(\"div\", {\n    className: \"form-element\"\n  }, __jsx(\"div\", {\n    className: \"form-label\"\n  }, \"Resume upload\"), __jsx(\"input\", {\n    type: \"file\",\n    onChange: function onChange(e) {\n      return onFileChange(e);\n    }\n  })))), __jsx(\"button\", {\n    className: \"btn btn-default bg-blue-500 hover:bg-blue-600 text-white btn-rounded\",\n    onClick: function onClick(e) {\n      return apply_submit(e);\n    },\n    disabled: clicked\n  }, \"Apply Job\", \" \"), ' '))));\n};\n\nexport default withRouter(JObPreview);","map":null,"metadata":{},"sourceType":"module"}